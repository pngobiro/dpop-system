{# Apply Judiciary Theme Colors #}
<style>
    #sidebarMenu {
        background-color: #006633 !important; /* Primary Green */
        color: #FFFFFF !important; /* White text */
    }
    #sidebarMenu .nav-link {
        color: #f0f0f0; /* Slightly off-white for links */
        transition: background-color 0.2s ease, color 0.2s ease;
    }
    #sidebarMenu .nav-link .sidebar-icon svg,
    #sidebarMenu .nav-link .sidebar-icon i,
    #sidebarMenu .nav-link .sidebar-icon img {
        color: #DAA520; /* Gold icons */
        fill: #DAA520; /* Gold icons (SVG fill) */
    }
    /* Style for the logo image itself if needed */
    #sidebarMenu .sidebar-brand-logo {
         max-height: 40px; /* Adjust max height as needed */
         width: auto;
         margin-right: 10px; /* Space between logo and text */
    }
    #sidebarMenu .nav-link:hover {
        background-color: #004d26; /* Darker Green on hover */
        color: #FFFFFF;
    }
    #sidebarMenu .nav-item.active > .nav-link {
        background-color: #DAA520; /* Gold background for active */
        color: #006633 !important; /* Primary Green text for active */
        font-weight: bold;
    }
    #sidebarMenu .nav-item.active > .nav-link .sidebar-icon svg,
    #sidebarMenu .nav-item.active > .nav-link .sidebar-icon i,
    #sidebarMenu .nav-item.active > .nav-link .sidebar-icon img {
         color: #DAA520 !important; /* Gold icons for active */
         fill: #DAA520 !important; /* Gold icons for active (SVG fill) */
    }
    #sidebarMenu .dropdown-divider {
        border-top: 1px solid #004d26; /* Darker Green separator */
    }
    #sidebarMenu .multi-level {
        background-color: #005a30; /* Slightly lighter green for submenu */
    }
     #sidebarMenu .multi-level .nav-link {
        padding-left: 2.5rem; /* Indent submenu items */
        color: #e0e0e0;
    }
     #sidebarMenu .multi-level .nav-link:hover {
        background-color: #004d26;
        color: #FFFFFF;
    }
     #sidebarMenu .multi-level .nav-item.active > .nav-link {
         background-color: #DAA520;
         color: #006633 !important;
     }
     /* Arrow color */
     #sidebarMenu .nav-link .link-arrow i {
        color: #DAA520;
     }
</style>

<nav class="navbar navbar-dark navbar-theme-primary px-4 col-12 d-lg-none">
  <a class="navbar-brand me-lg-5" href="/">
      <img class="sidebar-brand-logo" src="/static/assets/img/brand/logo1-Copy-2.png" alt="Judiciary Logo">
      {# <span style="color: #FFFFFF; font-weight: bold;">Judiciary Portal</span> #}
  </a>
  <div class="d-flex align-items-center">
      <button class="navbar-toggler d-lg-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
  </div>
</nav>

<nav id="sidebarMenu" class="sidebar d-lg-block text-white collapse" data-simplebar>
<div class="sidebar-inner px-4 pt-3">
  <div class="user-card d-flex d-md-none align-items-center justify-content-between justify-content-md-center pb-4">
    <div class="d-flex align-items-center">
      <div class="avatar-lg me-4">
        <img src="{{ ASSETS_ROOT }}/img/team/profile-picture-3.jpg" class="card-img-top rounded-circle border-white"
          alt="User Profile">
      </div>
      <div class="d-block">
        <h2 class="h5 mb-3">Hi, {{ request.user.first_name|default:'User' }}</h2>
        <a href="{% url 'authentication:logout' %}" class="btn btn-secondary btn-sm d-inline-flex align-items-center">
          <svg class="icon icon-xxs me-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
          Sign Out
        </a>
      </div>
    </div>
    <div class="collapse-close d-md-none">
      <a href="#sidebarMenu" data-bs-toggle="collapse"
          data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="true"
          aria-label="Toggle navigation">
          <svg class="icon icon-xs" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
        </a>
    </div>
  </div>
  <ul class="nav flex-column pt-3 pt-md-0">
    <li class="nav-item">
      <a href="/" class="nav-link d-flex align-items-center sidebar-brand">
         <img class="sidebar-brand-logo" src="/static/assets/img/brand/logo1-Copy-2.png" alt="Judiciary Logo">
      </a>
    </li>
    <li class="nav-item {% if segment == 'my_dashboard' or request.resolver_match.url_name == 'my_dashboard' %} active {% endif %}">
      <a href="{% url 'tasks:my_dashboard' %}" class="nav-link">
        <span class="sidebar-icon">
          <i class="fas fa-tachometer-alt me-2"></i>
        </span>
        <span class="sidebar-text">My Dashboard</span>
      </a>
    </li>

    <li class="nav-item {% if request.resolver_match.url_name == 'tasks_assigned_by_me' %} active {% endif %}">
      <a href="{% url 'tasks:tasks_assigned_by_me' %}" class="nav-link">
        <span class="sidebar-icon">
          <i class="fas fa-clipboard-check me-2"></i>
        </span>
        <span class="sidebar-text">Assigned Tasks</span>
      </a>
    </li>

    <li class="nav-item {% if request.resolver_match.url_name == 'department_list' %} active {% endif %}">
      <a href="{% url 'tasks:department_list' %}" class="nav-link">
        <span class="sidebar-icon">
          <i class="fas fa-building me-2"></i>
        </span>
        <span class="sidebar-text">Browse Projects</span>
      </a>
    </li>

    <li class="nav-item {% if request.resolver_match.url_name == 'dashboard' and 'meetings' in request.resolver_match.app_names %} active {% endif %}">
      <a href="{% url 'meetings:dashboard' %}" class="nav-link">
        <span class="sidebar-icon">
          <i class="fas fa-calendar me-2"></i>
        </span>
        <span class="sidebar-text">Meetings</span>
      </a>
    </li>

    {# Memos Section #}
    <li class="nav-item">
      <span class="nav-link collapsed d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#submenu-memos">
        <span>
          <span class="sidebar-icon"><i class="fas fa-envelope me-2"></i></span>
          <span class="sidebar-text">Memos</span>
        </span>
        <span class="link-arrow"><i class="fas fa-chevron-right"></i></span>
      </span>
      <div class="multi-level collapse {% if 'memos' in request.resolver_match.app_names %} show {% endif %}" role="list" id="submenu-memos" aria-expanded="false">
        <ul class="flex-column nav">
          <li class="nav-item {% if request.resolver_match.url_name == 'my_memos' %} active {% endif %}">
            <a class="nav-link" href="{% url 'memos:my_memos' %}">
              <span class="sidebar-icon"><i class="fas fa-file-alt"></i></span>
              <span class="sidebar-text">My Memos</span>
            </a>
          </li>
          <li class="nav-item {% if request.resolver_match.url_name == 'memo_create' %} active {% endif %}">
            <a class="nav-link" href="{% url 'memos:memo_create' %}">
              <span class="sidebar-icon"><i class="fas fa-plus-circle"></i></span>
              <span class="sidebar-text">Create Memo</span>
            </a>
          </li>
          <li class="nav-item {% if request.resolver_match.url_name == 'department_dashboard' and 'memos' in request.resolver_match.app_names %} active {% endif %}">
            <a class="nav-link" href="{% url 'memos:department_dashboard' %}">
              <span class="sidebar-icon"><i class="fas fa-tachometer-alt"></i></span>
              <span class="sidebar-text">Memo Dashboard</span>
            </a>
          </li>
        </ul>
      </div>
    </li>

    <li class="nav-item {% if 'library' in request.resolver_match.url_name %} active {% endif %}">
      <a href="{% url 'document_management:library' %}" class="nav-link">
        <span class="sidebar-icon">
          <i class="fas fa-book me-2"></i>
        </span>
        <span class="sidebar-text">Library</span>
      </a>
    </li>

    <li class="nav-item {% if 'statistics' in request.resolver_match.app_names %} active {% endif %}">
      <a href="/statistics/" class="nav-link">
        <span class="sidebar-icon">
          <i class="fas fa-chart-line me-2"></i> {# Using a chart icon for statistics #}
        </span>
        <span class="sidebar-text">Statistics</span>
      </a>
    </li>

    {# Settings Submenu #}
    {% if user.is_staff %}
    <li class="nav-item">
      <span class="nav-link collapsed d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#submenu-settings">
        <span>
          <span class="sidebar-icon"><i class="fas fa-cogs me-2"></i></span>
          <span class="sidebar-text">Settings</span>
        </span>
        <span class="link-arrow"><i class="fas fa-chevron-right"></i></span>
      </span>
      <div class="multi-level collapse {% if 'permissions' in request.resolver_match.app_names or 'authentication' in request.resolver_match.app_names and request.resolver_match.url_name in 'user_list,user_create,user_update,user_delete' %} show {% endif %}" role="list" id="submenu-settings" aria-expanded="false">
        <ul class="flex-column nav">
          <li class="nav-item {% if 'user_list' in request.resolver_match.url_name or 'user_create' in request.resolver_match.url_name or 'user_update' in request.resolver_match.url_name or 'user_delete' in request.resolver_match.url_name %} active {% endif %}">
             <a class="nav-link" href="{% url 'authentication:user_list' %}">
             <span class="sidebar-icon"><i class="fas fa-users"></i></span>
             <span class="sidebar-text">Manage Users</span>
            </a>
          </li>
          <li class="nav-item {% if 'manage_permissions' in request.resolver_match.url_name %} active {% endif %}">
             <a class="nav-link" href="{% url 'permissions:manage_permissions' %}">
             <span class="sidebar-icon"><i class="fas fa-user-shield"></i></span>
             <span class="sidebar-text">Permissions</span>
            </a>
          </li>
          <li class="nav-item {% if 'assign_departments' in request.resolver_match.url_name %} active {% endif %}">
            <a class="nav-link" href="{% url 'permissions:assign_departments' %}">
             <span class="sidebar-icon"><i class="fas fa-building"></i></span>
             <span class="sidebar-text">Assign Departments</span>
           </a>
          </li>
        </ul>
      </div>
    </li>
    {% endif %}


    <li role="separator" class="dropdown-divider mt-4 mb-3 border-gray-700"></li>
    <li class="nav-item">
      <a href="{% url 'authentication:logout' %}" class="nav-link">
          <span class="sidebar-icon">
              {# Removed text-danger class to keep icon gold #}
              <svg class="icon icon-xs me-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
              </svg>
          </span>
          <span class="sidebar-text">Logout</span>
      </a>
    </li>
  </ul>
</div>
</nav>